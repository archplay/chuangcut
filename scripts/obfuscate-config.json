{
  "description": "JavaScript 混淆配置 - 保守策略，保护核心业务逻辑不破坏功能",
  "version": "1.0.0",

  "reserved": {
    "description": "保留的标识符名称（不混淆）",

    "stepClasses": [
      "FetchMetadataStep",
      "UploadGeminiStep",
      "GeminiAnalysisStep",
      "ValidateStep",
      "NcaBatchSplitStep",
      "MigrateGcsStep",
      "ProcessSceneLoopStep",
      "ProcessSceneLoopConcurrentStep",
      "ConcatenateScenesStep",
      "DownloadStep",
      "BaseStep",
      "StepRegistry"
    ],

    "stepProperties": ["name", "id", "execute", "log", "logError", "validateInputs", "handleError"],

    "apiResponseKeys": [
      "id",
      "status",
      "created_at",
      "updated_at",
      "current_step",
      "step_history",
      "success",
      "data",
      "error",
      "message",
      "job_id",
      "step_id",
      "step_name",
      "major_step"
    ],

    "databaseFields": [
      "step_context",
      "checkpoint_data",
      "structured_data",
      "narration_text",
      "audio_url",
      "video_url",
      "title",
      "description",
      "duration",
      "timestamp"
    ],

    "workflowIds": ["single-video", "multi-video"],

    "logTypes": ["info", "error", "warn", "debug", "step_start", "step_complete", "step_error"],

    "commonExports": [
      "default",
      "getDb",
      "jobsRepo",
      "configsRepo",
      "apiKeysRepo",
      "workflowEngine",
      "stepRegistry",
      "createStep",
      "StyleLoader",
      "TemplateEngine",
      "logger",
      "retryableError",
      "ErrorClassifier"
    ]
  },

  "exclude": {
    "description": "不混淆的文件和目录（使用 glob 模式）",

    "paths": [
      "**/node_modules/**",
      "**/server.js",
      "**/*.json",
      "**/*.yaml",
      "**/*.yml",
      "**/*.css",
      "**/*.map"
    ]
  },

  "obfuscation": {
    "description": "混淆策略配置",

    "conservative": {
      "description": "保守混淆策略（适用于大部分代码）",
      "compact": true,
      "controlFlowFlattening": false,
      "controlFlowFlatteningThreshold": 0,
      "deadCodeInjection": false,
      "deadCodeInjectionThreshold": 0,
      "debugProtection": false,
      "debugProtectionInterval": 0,
      "disableConsoleOutput": false,
      "identifierNamesGenerator": "hexadecimal",
      "identifiersPrefix": "_0x",
      "ignoreImports": true,
      "log": false,
      "numbersToExpressions": false,
      "renameGlobals": false,
      "renameProperties": false,
      "renamePropertiesMode": "safe",
      "reservedNames": [],
      "reservedStrings": [],
      "seed": 0,
      "selfDefending": false,
      "simplify": true,
      "sourceMap": true,
      "sourceMapBaseUrl": "",
      "sourceMapFileName": "",
      "sourceMapMode": "separate",
      "sourceMapSourcesMode": "sources-content",
      "splitStrings": true,
      "splitStringsChunkLength": 10,
      "stringArray": true,
      "stringArrayCallsTransform": true,
      "stringArrayCallsTransformThreshold": 0.75,
      "stringArrayEncoding": ["base64"],
      "stringArrayIndexShift": true,
      "stringArrayRotate": true,
      "stringArrayShuffle": true,
      "stringArrayWrappersCount": 2,
      "stringArrayWrappersChainedCalls": true,
      "stringArrayWrappersParametersMaxCount": 4,
      "stringArrayWrappersType": "function",
      "stringArrayThreshold": 0.75,
      "target": "node",
      "transformObjectKeys": false,
      "unicodeEscapeSequence": false
    },

    "coreLogic": {
      "description": "核心逻辑混淆策略（lib/workflow, lib/ai）",
      "extends": "conservative",
      "controlFlowFlattening": true,
      "controlFlowFlatteningThreshold": 0.2,
      "stringArrayThreshold": 0.85,
      "splitStringsChunkLength": 8
    }
  },

  "directories": {
    "description": "目录混淆策略映射",

    "coreLogic": [
      "**/lib/workflow/**/*.js",
      "**/lib/ai/**/*.js",
      "**/lib/db/core/**/*.js",
      "**/lib/db/managers/**/*.js"
    ],

    "conservative": ["**/lib/**/*.js", "**/app/api/**/*.js", "**/components/**/*.js"]
  },

  "sourceMapConfig": {
    "description": "Source Map 配置",
    "enabled": true,
    "outputDir": ".next/source-maps",
    "includeInBuild": false,
    "baseUrl": ""
  }
}
